Este es un `README.md` dise√±ado para ser profesional, abstracto y √∫til para cualquier proyecto que utilice esta arquitectura de contenedores. He incluido los puntos cr√≠ticos que solucionamos (permisos de ejecuci√≥n, uso de `uv` y especificidades de Linux/Podman).

---

# üêç Python Dev Environment (UV + Podman/Docker)

Este repositorio proporciona una base s√≥lida y moderna para entornos de desarrollo en Python, utilizando **uv** como gestor de dependencias de alto rendimiento y contenedores para garantizar la reproducibilidad.

> [!IMPORTANT]
> **Entorno de ejecuci√≥n:** Este entorno est√° optimizado para sistemas **Linux**. Utiliza configuraciones espec√≠ficas como `keep-id` y sufijos de volumen `:z` para compatibilidad con **Podman** y **SELinux**.

## üöÄ Requisitos Previos

*   **Sistema Operativo:** Linux (probado en Fedora, Ubuntu y Arch).
*   **Motor de Contenedores:** [Podman](https://podman.io/) (recomendado) o Docker.
*   **Orquestador:** `podman-compose` o `docker-compose`.
*   **Gestor local (opcional):** [uv](https://docs.astral.sh/uv/) instalado localmente para generar archivos de bloqueo.

## üõ†Ô∏è Estructura del Proyecto

*   `Dockerfile`: Imagen base optimizada basada en Python Slim.
*   `compose.yml`: Definici√≥n del servicio, vol√∫menes y pol√≠ticas de usuario.
*   `pyproject.toml`: Definici√≥n de dependencias (est√°ndar PEP 621).
*   `entrypoint.sh`: Script de inicializaci√≥n del contenedor.

## üèóÔ∏è Gu√≠a de Construcci√≥n y Puesta en Marcha

Sigue estos pasos para inicializar el entorno desde cero:

### 1. Preparaci√≥n de dependencias
Antes de construir la imagen, es necesario generar el archivo de bloqueo para asegurar versiones consistentes:

```bash
uv lock
```

### 2. Permisos de ejecuci√≥n (Cr√≠tico)
Para que el contenedor pueda iniciar correctamente en Linux, los scripts de entrada deben tener permisos de ejecuci√≥n en el host:

```bash
chmod +x entrypoint.sh
```

### 3. Construcci√≥n del entorno
Utiliza el orquestador para descargar las im√°genes base y construir tu capa personalizada:

```bash
podman-compose build
```

### 4. Lanzamiento
Inicia el contenedor en segundo plano:

```bash
podman-compose up -d
```

## üí° Uso del Entorno

Una vez el contenedor est√© corriendo, puedes acceder a √©l para ejecutar comandos, tests o scripts:

```bash
# Acceder a una terminal interactiva dentro del contenedor
podman exec -it python_dev_env /bin/bash

# Ejecutar un comando directamente usando el venv gestionado por uv
podman exec python_dev_env python src/main.py
```

## üîß Detalles T√©cnicos de Linux/Podman

*   **Persistencia del Virtualenv:** Se utiliza un volumen dedicado (`venv_data`) mapeado a `/app/.venv` para evitar que las dependencias se pierdan al destruir el contenedor o se mezclen con archivos del host.
*   **Gesti√≥n de Permisos (`keep-id`):** En el archivo `compose.yml`, se utiliza `userns_mode: keep-id`. Esto permite que el usuario dentro del contenedor tenga el mismo UID/GID que tu usuario en Linux, evitando errores de "Permiso denegado" al escribir archivos desde el contenedor hacia tu carpeta local.
*   **SELinux:** Los vol√∫menes est√°n marcados con `:z` para permitir que Podman reetiquete autom√°ticamente los contextos de seguridad de los archivos en sistemas con SELinux habilitado.

## üìù Notas sobre `uv`
Este proyecto utiliza `uv` para la sincronizaci√≥n de paquetes. Si a√±ades una nueva librer√≠a al `pyproject.toml`, puedes actualizar el entorno vivo sin reconstruir la imagen:

```bash
podman exec python_dev_env uv sync
```

---
*Mantenido por Victor - 2026*
